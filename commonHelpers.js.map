{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44705167-ce06f8750cd1d65bf02e5b322';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from '../main.js'; // Исправьте путь если он неправильный\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function marcupImage(images) {\n  const markup = images\n    .map(image => {\n      return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                  <img\n                    width=\"360\"\n                    height=\"200\"\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\"\n                    alt=\"${image.tags}\" />\n                  <div class=\"image-info\">\n                    <p>LIKES: ${image.likes}</p>\n                    <p>VIEWS: ${image.views}</p>\n                    <p>COMMENTS: ${image.comments}</p>\n                    <p>DOWNLOADS: ${image.downloads}</p>\n                  </div>\n                </a>\n              </li>`;\n    })\n    .join('');\n  refs.imgGallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nexport function formReset() {\n  refs.formSearch.reset();\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  marcupImage,\n  showLoader,\n  hideLoader,\n  formReset,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const refs = {\n  formSearch: document.querySelector('#search'),\n  inputImgSearch: document.querySelector('.input-img-search'),\n  imgGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.getElementById('load-more'),\n};\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nrefs.formSearch.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentQuery = event.currentTarget.elements.search.value.trim();\n  if (!currentQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Enter a word for the query, please.',\n      layout: 2,\n      position: 'topRight',\n      displayMode: 'once',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  refs.imgGallery.innerHTML = '';\n  refs.loadMoreBtn.style.display = 'none';\n\n  try {\n    showLoader();\n    const data = await fetchImages(currentQuery, currentPage);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        layout: 2,\n        position: 'topRight',\n        displayMode: 'once',\n      });\n      hideLoader();\n      return;\n    }\n    hideLoader();\n    marcupImage(data.hits);\n    if (data.totalHits > 15) {\n      refs.loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  try {\n    showLoader();\n    const data = await fetchImages(currentQuery, currentPage);\n    marcupImage(data.hits);\n\n    if (currentPage * 15 >= data.totalHits) {\n      refs.loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n    hideLoader();\n    scrollPage();\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nfunction scrollPage() {\n  const { height: cardHeight } =\n    refs.imgGallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","lightbox","SimpleLightbox","marcupImage","images","markup","image","refs","showLoader","hideLoader","currentPage","currentQuery","event","iziToast","data","error","scrollPage","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAYjD,OAXiB,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,GACe,IAClB,CCdA,MAAME,EAAW,IAAIC,EAAe,kBAAmB,CACrD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAYC,EAAQ,CAClC,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA,gDACmCA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,2BAKxCA,EAAM,YAAY;AAAA,2BAClBA,EAAM,IAAI;AAAA;AAAA,gCAELA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,oBAI9C,EACA,KAAK,EAAE,EACVC,EAAK,WAAW,mBAAmB,YAAaF,CAAM,EACtDJ,EAAS,QAAO,CAClB,CAEO,SAASO,GAAa,CAC3BD,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASE,GAAa,CAC3BF,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CC9BO,MAAMA,EAAO,CAClB,WAAY,SAAS,cAAc,SAAS,EAC5C,eAAgB,SAAS,cAAc,mBAAmB,EAC1D,WAAY,SAAS,cAAc,UAAU,EAC7C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,eAAe,WAAW,CAClD,EAEA,IAAIG,EAAc,EACdC,EAAe,GAEnBJ,EAAK,WAAW,iBAAiB,SAAU,MAAMK,GAAS,CAGxD,GAFAA,EAAM,eAAc,EACpBD,EAAeC,EAAM,cAAc,SAAS,OAAO,MAAM,OACrD,CAACD,EAAc,CACjBE,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,sCACT,OAAQ,EACR,SAAU,WACV,YAAa,MACnB,CAAK,EACD,MACD,CAEDH,EAAc,EACdH,EAAK,WAAW,UAAY,GAC5BA,EAAK,YAAY,MAAM,QAAU,OAEjC,GAAI,CACFC,IACA,MAAMM,EAAO,MAAMjB,EAAYc,EAAcD,CAAW,EACxD,GAAII,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,OAAQ,EACR,SAAU,WACV,YAAa,MACrB,CAAO,EACDJ,IACA,MACD,CACDA,IACAN,EAAYW,EAAK,IAAI,EACjBA,EAAK,UAAY,KACnBP,EAAK,YAAY,MAAM,QAAU,QAEpC,OAAQQ,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAEDR,EAAK,YAAY,iBAAiB,QAAS,SAAY,CACrDG,GAAe,EACf,GAAI,CACFF,IACA,MAAMM,EAAO,MAAMjB,EAAYc,EAAcD,CAAW,EACxDP,EAAYW,EAAK,IAAI,EAEjBJ,EAAc,IAAMI,EAAK,YAC3BP,EAAK,YAAY,MAAM,QAAU,OACjCM,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACjB,CAAO,GAEHJ,IACAO,GACD,OAAQD,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAED,SAASC,GAAa,CACpB,KAAM,CAAE,OAAQC,CAAY,EAC1BV,EAAK,WAAW,kBAAkB,wBACpC,OAAO,SAAS,CACd,IAAKU,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}